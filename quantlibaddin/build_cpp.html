<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>QuantLibAddin: Build A QuantLibAddin C++ Environment on Windows and/or Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="tabs.css">
    <link rel="stylesheet" href="ql.css">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
</head>
<body>
    <div id='wrapper'>
        <div id='header'>
        <div id='floatleft'><a class="imglink" href="index.html"><img src="images/logo_qla.jpg" width="180" height="72" border="0" alt="QuantLibAddin Logo"/></a></div>
        <div id='floatright'><a class="imglink" href="http://quantlib.org"><img src="images/logo_ql.jpg" width="130" height="82" border="0" alt="QuantLib Logo"/></a></div>
        </div>
        <div id='content'>
            <div id='col-left'>
            <div id="version">Version 1.21.0</div>
                <div id='sidebar'>
<ul>
<li class="menuheader"><a href="index.html">Home</a></li>
<li><a href="installation.html">Installation</a></li>
<li><a href="design.html">Design</a></li>
<li><a href="history.html">History</a></li>
<li><a href="license.html">License</a></li>
<li><a href="people.html">People</a></li>
<li><a href="faq.html">FAQ</a></li>
<li class="menuheader"><a href="functional.html">Functional<br>Documentation</a></li>
<li><a href="manual.html">Manual</a></li>
<li><a href="allfunctions.html">Functions</a></li>
<li><a href="categories.html">Categories</a></li>
<li><a href="enums.html">Enumerations</a></li>
<li class="menuheader"><a href="technical.html">Technical<br>Documentation</a></li>
<li><a href="tutorials.html">Tutorials</a></li>
<li><a href="annotated.html">Classes</a></li>
<li><a href="hierarchy.html">Hierarchy</a></li>
<li><a href="files.html">Files</a></li>
<li><a href="examples.html">Examples</a></li>
</ul>
                </div>
<div class="logo">
<div class="vspace"></div>
<a href="http://www.reposit.be" id="reposit_logo"></a>
<div class="vspace"></div>
</div>
            </div>
            <div id='col-right'>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Build A QuantLibAddin C++ Environment on Windows and/or Linux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div align="center"><small><a href="tutorials.html">back to tutorials index</a></small></div><h1><a class="anchor" id="build_cpp_overview"></a>
Overview</h1>
<p>This document provides general instructions for building a QuantLibAddin C++ environment under Windows, and on platforms which use Autoconf e.g. Linux.</p>
<dl>
<dt><a class="el" href="build_cpp.html#build_cpp_prerequisites">1 Prerequisites</a> </dt>
<dd><dl>
<dt><a class="el" href="build_cpp.html#build_cpp_conventions">1.1 Conventions</a> </dt>
<dd></dd>
<dt><a class="el" href="build_cpp.html#build_cpp_boost">1.2 Boost</a> </dt>
<dd></dd>
<dt><a class="el" href="build_cpp.html#build_cpp_python">1.3 Python 3.x</a> </dt>
<dd></dd>
</dl>
</dd>
<dt><a class="el" href="build_cpp.html#build_cpp_win">2 Windows</a> </dt>
<dd><dl>
<dt><a class="el" href="build_cpp.html#build_cpp_win_download">2.2 Download</a> </dt>
<dd></dd>
<dt><a class="el" href="build_cpp.html#build_cpp_win_build">2.3 Build</a> </dt>
<dd></dd>
<dt><a class="el" href="build_cpp.html#build_cpp_win_test">2.4 Test</a> </dt>
<dd></dd>
<dt><a class="el" href="build_cpp.html#build_cpp_win_usage">2.5 Usage</a> </dt>
<dd></dd>
</dl>
</dd>
<dt><a class="el" href="build_cpp.html#build_cpp_auto">3 Autoconf</a> </dt>
<dd><dl>
<dt><a class="el" href="build_cpp.html#build_cpp_auto_download">3.2 Download</a> </dt>
<dd></dd>
<dt><a class="el" href="build_cpp.html#build_cpp_auto_build">3.3 Build</a> </dt>
<dd></dd>
<dt><a class="el" href="build_cpp.html#build_cpp_auto_test">3.4 Test</a> </dt>
<dd></dd>
<dt><a class="el" href="build_cpp.html#build_cpp_auto_usage">3.5 Usage</a> </dt>
<dd></dd>
</dl>
</dd>
</dl>
<h1><a class="anchor" id="build_cpp_prerequisites"></a>
1 Prerequisites</h1>
<p>Before proceeding to compile the source code, consult the documents below.</p>
<h2><a class="anchor" id="build_cpp_conventions"></a>
1.1 Conventions</h2>
<p>See the following document regarding naming conventions in use for the project: <a class="el" href="conventions.html">Conventions</a></p>
<h2><a class="anchor" id="build_cpp_boost"></a>
1.2 Boost</h2>
<p>QuantLibAddin depends on Boost. Any recent version of Boost should be OK. The minimum version of Boost recommended for QuantLib is 1.48. You will need the compiled Boost libraries, the Boost header files alone are not sufficient.</p>
<h2><a class="anchor" id="build_cpp_python"></a>
1.3 Python 3.x</h2>
<p>Some QuantLibAddin code is autogenerated by gensrc, which is a Python script. Before rebuilding QuantLibAddin you need to have Python 3.x installed on your machine. Here is the link to the Python website: <a href="http://www.python.org/">http://www.python.org/</a>.</p>
<p>On Windows, if Python is installed on your machine so that .py files are associated with the Python executable, then the gensrc scripts should build OK with no modification required.</p>
<p>Otherwise, after you install gensrc (below), you might need to edit these files...</p>
<pre class="fragment">    ObjectHandler\gensrc\Makefile.vc
    QuantLibAddin\gensrc\Makefile.vc
</pre><p>...and set the PYTHON variable equal to the location of the Python executable on your machine, e.g:</p>
<pre class="fragment">    PYTHON=C:\Users\username\AppData\Local\Programs\Python\Python39\python.exe
</pre><h1><a class="anchor" id="build_cpp_win"></a>
2 Windows</h1>
<h2><a class="anchor" id="build_cpp_win_download"></a>
2.2 Download</h2>
<h3><a class="anchor" id="build_cpp_win_directories"></a>
2.2.1 Directories</h3>
<p>The Visual C++ project files for QuantLibAddin rely on relative pathnames to refer to the prerequisite projects QuantLib, log4cxx, gensrc, and ObjectHandler. In order for this to work, these projects must reside side by side in the directory tree, and the name of each project's parent directory must not include the version number (e.g. <code>QuantLib</code> not <code>QuantLib-1.21.0</code>).</p>
<p>By default the installer for each project uncompresses the source code to <code>C:\build_ql_1_21_0</code> (with the exception of the zip file for QuantLib, where you must manually specify the target directory, removing the <code>1.21.0</code> suffix from the directory name). For purposes of this tutorial we assume the packages have been installed in this way: </p><pre class="fragment">C:\build_ql_1_21_0\gensrc
C:\build_ql_1_21_0\log4cxx
C:\build_ql_1_21_0\ObjectHandler
C:\build_ql_1_21_0\QuantLib
C:\build_ql_1_21_0\QuantLibAddin
</pre><h3><a class="anchor" id="build_cpp_win_uncompress"></a>
2.2.2 Uncompress the Source Code</h3>
<p>Go to the <a href="https://bintray.com/quantlib/releases/QuantLibXL/1.21#files">QuantLib downloads page</a>.</p>
<p>Download <code>log4cxx-0.10.0f13.zip</code> and uncompress the package to <code>C:\build_ql_1_21_0\log4cxx</code>.</p>
<p>Download <code>gensrc-1.21.0.zip</code> and uncompress the package to <code>C:\build_ql_1_21_0\gensrc</code>.</p>
<p>Download <code>ObjectHandler-1.21.0.zip</code> and uncompress the package to <code>C:\build_ql_1_21_0\ObjectHandler</code>.</p>
<p>Download <code>QuantLib-1.21.0.zip</code> and uncompress the package to <code>C:\build_ql_1_21_0\QuantLib</code>.</p>
<p>Download <code>QuantLibAddin-1.21.0.zip</code> and uncompress the package to <code>C:\build_ql_1_21_0\QuantLibAddin</code>.</p>
<h2><a class="anchor" id="build_cpp_win_build"></a>
2.3 Build</h2>
<p>Open solution <code>QuantLibAddin\QuantLibAddin_vc?.sln</code>, choose configuration <code>Release (static runtime)</code>, and execute menu item <code>Build | Build Solution</code>.</p>
<h2><a class="anchor" id="build_cpp_win_test"></a>
2.4 Test</h2>
<p>Open a DOS prompt in directory </p><pre class="fragment">C:\build_ql_1_21_0\QuantLibAddin\Clients\Cpp\bin
</pre><p>Execute the example program. The output should appear similar to the following: </p><pre class="fragment">Begin example program.
QuantLibAddin version = 1.21.0
ObjectHandler version = 1.21.0
option PV = 3.84431
End example program.
</pre><h2><a class="anchor" id="build_cpp_win_usage"></a>
2.5 Usage</h2>
<h3><a class="anchor" id="build_cpp_win_include"></a>
2.5.1 #include</h3>
<p>Add the following directive to your project's source file: </p><pre class="fragment">#include &lt;qlo/qladdin.hpp&gt;
</pre><h3><a class="anchor" id="build_cpp_win_link"></a>
2.5.2 Link</h3>
<p>Your project's link to the QuantLibAddin library is established automatically by the directive </p><pre class="fragment">#pragma comment(lib, QLADDIN_LIB_NAME)
</pre><p> in file <code>qlo/autolink.hpp</code></p>
<p>The name of the library depends on your compiler and configuration. For example, if you're using VC8, configuration Release (static runtime), the library is called </p><pre class="fragment">QuantLibAddin\lib\QuantLibObjects-vc80-mt-s-1.21.0.lib
</pre><h1><a class="anchor" id="build_cpp_auto"></a>
3 Autoconf</h1>
<h2><a class="anchor" id="build_cpp_auto_download"></a>
3.2 Download</h2>
<h3><a class="anchor" id="build_cpp_auto_directories"></a>
3.2.1 Directories</h3>
<p>This example assumes that you do not have root access to your machine, so that the entire build and installation environment resides under your home directory.</p>
<p>Let's say your home directory is <code>/home/erik</code>. Create two subdirectories under that, one where you will compile the code and the other where you will install it: </p><pre class="fragment">/home/erik/build
/home/erik/install
</pre><h3><a class="anchor" id="build_cpp_auto_uncompress"></a>
3.2.2 Uncompress the Source Code</h3>
<p>Go to the <a href="https://bintray.com/quantlib/releases/QuantLib/1.21#files">QuantLib downloads page</a>.</p>
<p>Download <code>QuantLib-1.21.0.tgz</code> and uncompress the package to <code>/home/erik/build/QuantLib-1.21.0</code>.</p>
<p>Go to the <a href="https://bintray.com/quantlib/releases/QuantLibXL/1.21#files">QuantLibXL downloads page</a>.</p>
<p>Download <code>log4cxx-0.10.0f13.tar.gz</code> and uncompress the package to <code>/home/erik/build/log4cxx-0.10.0</code>.</p>
<p>Download <code>gensrc-1.21.0.tgz</code> and uncompress the package to <code>/home/erik/build/gensrc-1.21.0</code>.</p>
<p>Download <code>ObjectHandler-1.21.0.tgz</code> and uncompress the package to <code>/home/erik/build/ObjectHandler-1.21.0</code>.</p>
<p>Download <code>QuantLibAddin-1.21.0.tgz</code> and uncompress the package to <code>/home/erik/build/QuantLibAddin-1.21.0</code>.</p>
<h2><a class="anchor" id="build_cpp_auto_build"></a>
3.3 Build</h2>
<h3><a class="anchor" id="build_cpp_auto_log4cxx"></a>
3.3.1 Build log4cxx</h3>
<p>Support for log4cxx is optional. If you do not require logging, then when you configure ObjectHandler (see below), pass in the argument <code>&ndash;without-log4cxx</code>, which will cause log messages to be written to stdout instead of to the log file. In that case you can skip ahead to the next section, <a class="el" href="build_cpp.html#build_cpp_auto_oh">3.3.2 Build ObjectHandler</a>. If you need logging, read on.</p>
<p>First you need to install apr and apr-utils. Our copy of log4cxx includes source code for apr and apr-utils. In the past we used to build them with these commands:</p>
<pre class="fragment">cd /home/erik/build/log4cxx-0.10.0/src/apr
./buildconf
./configure --prefix=/home/erik/install
make install
cd /home/erik/build/log4cxx-0.10.0/src/apr-util
./buildconf
./configure --prefix=/home/erik/install --with-apr=/home/erik/install
make install
</pre><p>But those commands no longer seem to work on new linux systems. There might be a binary release available for your platform, on ubuntu you might try something like this:</p>
<pre class="fragment">sudo apt-get install libapr1-dev libaprutil1-dev
</pre><p>Another possibility is to go to the apache web site and download the latest sources for apr and apr-utils. At the time of this writing the files are apr-1.5.1.tar.gz and apr-util-1.5.3.tar.gz. Copy them to a temp directory, untar them, and compile them something like this:</p>
<pre class="fragment">cd /home/erik/temp/apr-1.5.1
./buildconf
./configure --prefix=/home/erik/install
make install
cd /home/erik/temp/apr-util-1.5.3
./buildconf --with-apr=../apr-1.5.1
./configure --prefix=/home/erik/install --with-apr=../apr-1.5.1
make install
</pre><p>Once you have apr and apr-utils installed, go back and build log4cxx:</p>
<pre class="fragment">cd /home/erik/build/log4cxx-0.10.0
./autogen.sh
./configure --prefix=/home/erik/install --with-apr=/home/erik/install \
    --with-apr-util=/home/erik/install
make install
</pre><h3><a class="anchor" id="build_cpp_auto_oh"></a>
3.3.2 Build ObjectHandler</h3>
<p>If you don't need logging, pass in the argument <code>&ndash;without-log4cxx</code> to <code>configure</code>.</p>
<pre class="fragment">cd /home/erik/build/ObjectHandler-1.21.0
./configure --with-gensrc=/home/erik/build/gensrc-1.21.0 \
    --prefix=/home/erik/install \
    CPPFLAGS=-I/home/erik/install/include \
    LDFLAGS=-L/home/erik/install/lib
make install
</pre><h3><a class="anchor" id="build_cpp_auto_ql"></a>
3.3.3 Build QuantLib</h3>
<pre class="fragment">cd /home/erik/build/QuantLib-1.21.0
./configure --prefix=/home/erik/install
make install
</pre><h3><a class="anchor" id="build_cpp_auto_qla"></a>
3.3.4 Build QuantLibAddin</h3>
<pre class="fragment">cd /home/erik/build/QuantLibAddin-1.21.0
./configure --prefix=/home/erik/install --enable-addin-cpp \
    --with-gensrc=/home/erik/build/gensrc-1.21.0 \
    --with-oh=/home/erik/build/ObjectHandler-1.21.0 \
    CPPFLAGS=-I/home/erik/install/include \
    LDFLAGS=-L/home/erik/install/lib
make install
</pre><h2><a class="anchor" id="build_cpp_auto_test"></a>
3.4 Test</h2>
<pre class="fragment">cd /home/erik/build/QuantLibAddin-1.21.0/Clients/Cpp
./QLADemo
</pre><p>This should generate output similar to the following:</p>
<pre class="fragment">Begin example program.
QuantLibAddin version = 1.21.0
ObjectHandler version = 1.21.0
option PV = 3.84431
End example program.
</pre><h2><a class="anchor" id="build_cpp_auto_usage"></a>
3.5 Usage</h2>
<p>To incorporate QuantLibAddin functionality into your own applications:</p>
<p>Suppose your application consists of source file <code>yourapp.cpp:</code> </p><pre class="fragment">#include &lt;qlo/qladdin.hpp&gt;
#include &lt;iostream&gt;

int main()
{
    std::cout &lt;&lt; QuantLibAddin::qlAddinVersion() &lt;&lt; std::endl;
}
</pre><p>To compile your program, ensure that the path containing the QuantLibAddin header is among those searched by your compiler. If you have followed the build instructions above, the command would be</p>
<pre class="fragment">g++ -I/home/erik/install/include -c -o yourapp.o yourapp.cpp
</pre><p>When linking your program use the -l option to tell gcc to link to the log4cxx, ObjectHandler, QuantLib, and QuantLibAddin libraries, and use -L to specify the path containing those libraries, e.g:</p>
<pre class="fragment">g++ -o yourapp yourapp.o -L/home/erik/install/lib \
    -llog4cxx -lObjectHandler -lQuantLib -lQuantLibAddin
</pre><p>Finally before invoking your executable you need to ensure that your loader knows where to find the libraries, e.g:</p>
<pre class="fragment">export LD_LIBRARY_PATH=/home/erik/install/lib
</pre><div align="center"><small><a href="tutorials.html">back to tutorials index</a></small></div> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
            </div>
            <div class='clearfix'></div>
<div id="footer">SourceForge logo copyright &#169; Open Source Technology Group<br>reposit logo <a href="http://www.reposit.be">copyright &#169; 2015 reposit Ltd Dublin</a><br>all other content <a href="license.html">copyright &#169; 2004-20015 The QuantLib Group</a></div>
        </div>
        <div class='clearfix'></div>
    </div>
    <div class='clearfix'></div>
</body>
</html>
