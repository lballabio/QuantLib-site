<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QuantLib: MulticurveBootstrapping.cpp</title>
<link href='https://fonts.googleapis.com/css?family=Merriweather+Sans:800' rel='stylesheet' type='text/css'>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quantlibextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="http://quantlib.org">
       <img alt="QuantLib" src="QL-title.jpg"></a>
   <div id="projectbrief">A free/open-source library for quantitative finance</div>
   <div id="projectnumber">Reference manual - version 1.21</div>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MulticurveBootstrapping.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example prices an interest rate swap over a term structure and calculates its fair fixed rate and floating spread.</p>
<div class="fragment"><div class="line"><span class="comment">/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*  This example shows how to set up a term structure with OIS discounting</span></div>
<div class="line"><span class="comment">    and then price a simple 5 year swap.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    Example based on market data in paper by F. M. Ametrano and M. Bianchetti,</span></div>
<div class="line"><span class="comment">    Everything You Always Wanted to Know About Multiple Interest Rate Curve Boostrapping</span></div>
<div class="line"><span class="comment">    but Were Afraid to Ask (April 2, 2013).</span></div>
<div class="line"><span class="comment">    http://ssrn.com/abstract=2219548</span></div>
<div class="line"><span class="comment">    Eonia curve was taken from Figure 25 and Euribor 6m from figure 31.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;ql/qldefines.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#ifdef BOOST_MSVC</span></div>
<div class="line"><span class="preprocessor">#  include &lt;ql/auto_link.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/termstructures/yield/piecewiseyieldcurve.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/termstructures/yieldtermstructure.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/termstructures/yield/ratehelpers.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/termstructures/yield/oisratehelper.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/pricingengines/swap/discountingswapengine.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/indexes/ibor/eonia.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/indexes/ibor/euribor.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/time/imm.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/time/calendars/target.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/time/daycounters/actual360.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/time/daycounters/thirty360.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/time/daycounters/actualactual.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/math/interpolations/cubicinterpolation.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ql/math/interpolations/loginterpolation.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_quant_lib.html">QuantLib</a>;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if defined(QL_ENABLE_SESSIONS)</span></div>
<div class="line"><span class="keyword">namespace </span><a class="code" href="namespace_quant_lib.html">QuantLib</a> {</div>
<div class="line"> </div>
<div class="line">    ThreadKey sessionId() { <span class="keywordflow">return</span> 0; }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span>, <span class="keywordtype">char</span>* []) {</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="comment">        /*********************</span></div>
<div class="line"><span class="comment">         ***  MARKET DATA  ***</span></div>
<div class="line"><span class="comment">         *********************/</span></div>
<div class="line"> </div>
<div class="line">        Calendar calendar = TARGET();</div>
<div class="line"> </div>
<div class="line">        Date todaysDate(11, December, 2012);</div>
<div class="line">        <a name="a0"></a><a class="code" href="class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance">Settings::instance</a>().<a name="a1"></a><a class="code" href="class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed.">evaluationDate</a>() = todaysDate;</div>
<div class="line">        todaysDate = <a class="code" href="class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance">Settings::instance</a>().<a class="code" href="class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed.">evaluationDate</a>();</div>
<div class="line"> </div>
<div class="line">        <a name="a2"></a><a class="code" href="group__types.html#gab9c87440c314438e51a899a03d2442d0" title="integer number">Integer</a> fixingDays = 2;</div>
<div class="line">        Date settlementDate = calendar.advance(todaysDate, fixingDays, Days);</div>
<div class="line">        <span class="comment">// must be a business day</span></div>
<div class="line">        settlementDate = calendar.adjust(settlementDate);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Today: &quot;</span> &lt;&lt; todaysDate.weekday()</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; todaysDate &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Settlement date: &quot;</span> &lt;&lt; settlementDate.weekday()</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; settlementDate &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="comment">        /********************</span></div>
<div class="line"><span class="comment">         ***    QUOTES    ***</span></div>
<div class="line"><span class="comment">         ********************/</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// SimpleQuote stores a value which can be manually changed;</span></div>
<div class="line">        <span class="comment">// other Quote subclasses could read the value from a database</span></div>
<div class="line">        <span class="comment">// or some kind of data feed.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// deposits</span></div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; dONRate(<span class="keyword">new</span> SimpleQuote(0.0004));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; dTNRate(<span class="keyword">new</span> SimpleQuote(0.0004));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; dSNRate(<span class="keyword">new</span> SimpleQuote(0.0004));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// OIS</span></div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois1WRate(<span class="keyword">new</span> SimpleQuote(0.00070));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois2WRate(<span class="keyword">new</span> SimpleQuote(0.00069));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois3WRate(<span class="keyword">new</span> SimpleQuote(0.00078));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois1MRate(<span class="keyword">new</span> SimpleQuote(0.00074));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Dated OIS</span></div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; oisDated1Rate(<span class="keyword">new</span> SimpleQuote( 0.000460));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; oisDated2Rate(<span class="keyword">new</span> SimpleQuote( 0.000160));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; oisDated3Rate(<span class="keyword">new</span> SimpleQuote(-0.000070));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; oisDated4Rate(<span class="keyword">new</span> SimpleQuote(-0.000130));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; oisDated5Rate(<span class="keyword">new</span> SimpleQuote(-0.000140));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// OIS</span></div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois15MRate(<span class="keyword">new</span> SimpleQuote(0.00002));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois18MRate(<span class="keyword">new</span> SimpleQuote(0.00008));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois21MRate(<span class="keyword">new</span> SimpleQuote(0.00021));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois2YRate(<span class="keyword">new</span> SimpleQuote(0.00036));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois3YRate(<span class="keyword">new</span> SimpleQuote(0.00127));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois4YRate(<span class="keyword">new</span> SimpleQuote(0.00274));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois5YRate(<span class="keyword">new</span> SimpleQuote(0.00456));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois6YRate(<span class="keyword">new</span> SimpleQuote(0.00647));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois7YRate(<span class="keyword">new</span> SimpleQuote(0.00827));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois8YRate(<span class="keyword">new</span> SimpleQuote(0.00996));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois9YRate(<span class="keyword">new</span> SimpleQuote(0.01147));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois10YRate(<span class="keyword">new</span> SimpleQuote(0.0128));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois11YRate(<span class="keyword">new</span> SimpleQuote(0.01404));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois12YRate(<span class="keyword">new</span> SimpleQuote(0.01516));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois15YRate(<span class="keyword">new</span> SimpleQuote(0.01764));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois20YRate(<span class="keyword">new</span> SimpleQuote(0.01939));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois25YRate(<span class="keyword">new</span> SimpleQuote(0.02003));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; ois30YRate(<span class="keyword">new</span> SimpleQuote(0.02038));</div>
<div class="line"> </div>
<div class="line"><span class="comment">        /*********************</span></div>
<div class="line"><span class="comment">         ***  RATE HELPERS ***</span></div>
<div class="line"><span class="comment">         *********************/</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// RateHelpers are built from the above quotes together with</span></div>
<div class="line">        <span class="comment">// other instrument dependant infos.  Quotes are passed in</span></div>
<div class="line">        <span class="comment">// relinkable handles which could be relinked to some other</span></div>
<div class="line">        <span class="comment">// data source later.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// deposits</span></div>
<div class="line">        DayCounter depositDayCounter = Actual360();</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; dON(<span class="keyword">new</span> DepositRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(dONRate),</div>
<div class="line">            1 * Days, 0,</div>
<div class="line">            calendar, <a name="a3"></a><a class="code" href="group__datetime.html#ggaff46c5ae9385d20709bedade86edd368ab6a37af780aa2b97f8bbdc4d149dae18">Following</a>,</div>
<div class="line">            <span class="keyword">false</span>, depositDayCounter));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; dTN(<span class="keyword">new</span> DepositRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(dTNRate),</div>
<div class="line">            1 * Days, 1,</div>
<div class="line">            calendar, <a class="code" href="group__datetime.html#ggaff46c5ae9385d20709bedade86edd368ab6a37af780aa2b97f8bbdc4d149dae18">Following</a>,</div>
<div class="line">            <span class="keyword">false</span>, depositDayCounter));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; dSN(<span class="keyword">new</span> DepositRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(dSNRate),</div>
<div class="line">            1 * Days, 2,</div>
<div class="line">            calendar, <a class="code" href="group__datetime.html#ggaff46c5ae9385d20709bedade86edd368ab6a37af780aa2b97f8bbdc4d149dae18">Following</a>,</div>
<div class="line">            <span class="keyword">false</span>, depositDayCounter));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// OIS</span></div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;Eonia&gt; eonia(<span class="keyword">new</span> Eonia);</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois1W(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 1 * Weeks,</div>
<div class="line">            Handle&lt;Quote&gt;(ois1WRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois2W(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 2 * Weeks,</div>
<div class="line">            Handle&lt;Quote&gt;(ois2WRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois3W(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 3 * Weeks,</div>
<div class="line">            Handle&lt;Quote&gt;(ois3WRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois1M(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 1 * Months,</div>
<div class="line">            Handle&lt;Quote&gt;(ois1MRate), eonia));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Dated OIS</span></div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; oisDated1(<span class="keyword">new</span> DatedOISRateHelper(</div>
<div class="line">            Date(16, January, 2013), Date(13, February, 2013),</div>
<div class="line">            Handle&lt;Quote&gt;(oisDated1Rate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; oisDated2(<span class="keyword">new</span> DatedOISRateHelper(</div>
<div class="line">            Date(13, February, 2013), Date(13, March, 2013),</div>
<div class="line">            Handle&lt;Quote&gt;(oisDated2Rate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; oisDated3(<span class="keyword">new</span> DatedOISRateHelper(</div>
<div class="line">            Date(13, March, 2013), Date(10, April, 2013),</div>
<div class="line">            Handle&lt;Quote&gt;(oisDated3Rate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; oisDated4(<span class="keyword">new</span> DatedOISRateHelper(</div>
<div class="line">            Date(10, April, 2013), Date(8, May, 2013),</div>
<div class="line">            Handle&lt;Quote&gt;(oisDated4Rate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; oisDated5(<span class="keyword">new</span> DatedOISRateHelper(</div>
<div class="line">            Date(8, May, 2013), Date(12, June, 2013),</div>
<div class="line">            Handle&lt;Quote&gt;(oisDated5Rate), eonia));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// OIS</span></div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois15M(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 15*Months,</div>
<div class="line">            Handle&lt;Quote&gt;(ois15MRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois18M(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 18*Months,</div>
<div class="line">            Handle&lt;Quote&gt;(ois18MRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois21M(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 21*Months,</div>
<div class="line">            Handle&lt;Quote&gt;(ois21MRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois2Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 2*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois2YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois3Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 3*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois3YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois4Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 4*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois4YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois5Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 5*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois5YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois6Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 6*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois6YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois7Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 7*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois7YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois8Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 8*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois8YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois9Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 9*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois9YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois10Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 10*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois10YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois11Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 11*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois11YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois12Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 12*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois12YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois15Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 15*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois15YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois20Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 20*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois20YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois25Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 25*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois25YRate), eonia));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; ois30Y(<span class="keyword">new</span> OISRateHelper(</div>
<div class="line">            2, 30*Years,</div>
<div class="line">            Handle&lt;Quote&gt;(ois30YRate), eonia));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">        /*********************</span></div>
<div class="line"><span class="comment">        **  CURVE BUILDING **</span></div>
<div class="line"><span class="comment">        *********************/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">        /*********************</span></div>
<div class="line"><span class="comment">        **   EONIA CURVE    **</span></div>
<div class="line"><span class="comment">        *********************/</span></div>
<div class="line"> </div>
<div class="line">        DayCounter termStructureDayCounter = Actual365Fixed();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Eonia curve</span></div>
<div class="line">        std::vector&lt;ext::shared_ptr&lt;RateHelper&gt; &gt; eoniaInstruments;</div>
<div class="line">        eoniaInstruments.push_back(dON);</div>
<div class="line">        eoniaInstruments.push_back(dTN);</div>
<div class="line">        eoniaInstruments.push_back(dSN);</div>
<div class="line">        eoniaInstruments.push_back(ois1W);</div>
<div class="line">        eoniaInstruments.push_back(ois2W);</div>
<div class="line">        eoniaInstruments.push_back(ois3W);</div>
<div class="line">        eoniaInstruments.push_back(ois1M);</div>
<div class="line">        eoniaInstruments.push_back(oisDated1);</div>
<div class="line">        eoniaInstruments.push_back(oisDated2);</div>
<div class="line">        eoniaInstruments.push_back(oisDated3);</div>
<div class="line">        eoniaInstruments.push_back(oisDated4);</div>
<div class="line">        eoniaInstruments.push_back(oisDated5);</div>
<div class="line">        eoniaInstruments.push_back(ois15M);</div>
<div class="line">        eoniaInstruments.push_back(ois18M);</div>
<div class="line">        eoniaInstruments.push_back(ois21M);</div>
<div class="line">        eoniaInstruments.push_back(ois2Y);</div>
<div class="line">        eoniaInstruments.push_back(ois3Y);</div>
<div class="line">        eoniaInstruments.push_back(ois4Y);</div>
<div class="line">        eoniaInstruments.push_back(ois5Y);</div>
<div class="line">        eoniaInstruments.push_back(ois6Y);</div>
<div class="line">        eoniaInstruments.push_back(ois7Y);</div>
<div class="line">        eoniaInstruments.push_back(ois8Y);</div>
<div class="line">        eoniaInstruments.push_back(ois9Y);</div>
<div class="line">        eoniaInstruments.push_back(ois10Y);</div>
<div class="line">        eoniaInstruments.push_back(ois11Y);</div>
<div class="line">        eoniaInstruments.push_back(ois12Y);</div>
<div class="line">        eoniaInstruments.push_back(ois15Y);</div>
<div class="line">        eoniaInstruments.push_back(ois20Y);</div>
<div class="line">        eoniaInstruments.push_back(ois25Y);</div>
<div class="line">        eoniaInstruments.push_back(ois30Y);</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;YieldTermStructure&gt; eoniaTermStructure(</div>
<div class="line">            <span class="keyword">new</span> PiecewiseYieldCurve&lt;Discount, Cubic&gt;(</div>
<div class="line">                todaysDate, eoniaInstruments,</div>
<div class="line">                termStructureDayCounter) );</div>
<div class="line"> </div>
<div class="line">        eoniaTermStructure-&gt;enableExtrapolation();</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Term structures that will be used for pricing:</span></div>
<div class="line">        <span class="comment">// the one used for discounting cash flows</span></div>
<div class="line">        RelinkableHandle&lt;YieldTermStructure&gt; discountingTermStructure;</div>
<div class="line">        <span class="comment">// the one used for forward rate forecasting</span></div>
<div class="line">        RelinkableHandle&lt;YieldTermStructure&gt; forecastingTermStructure;</div>
<div class="line"> </div>
<div class="line">        discountingTermStructure.linkTo(eoniaTermStructure);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">        /*********************</span></div>
<div class="line"><span class="comment">        **    EURIBOR 6M    **</span></div>
<div class="line"><span class="comment">        *********************/</span></div>
<div class="line">        ext::shared_ptr&lt;IborIndex&gt; euribor6M(<span class="keyword">new</span> Euribor6M);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// deposits</span></div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; d6MRate(<span class="keyword">new</span> SimpleQuote(0.00312));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// FRAs</span></div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra1Rate(<span class="keyword">new</span> SimpleQuote(0.002930));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra2Rate(<span class="keyword">new</span> SimpleQuote(0.002720));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra3Rate(<span class="keyword">new</span> SimpleQuote(0.002600));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra4Rate(<span class="keyword">new</span> SimpleQuote(0.002560));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra5Rate(<span class="keyword">new</span> SimpleQuote(0.002520));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra6Rate(<span class="keyword">new</span> SimpleQuote(0.002480));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra7Rate(<span class="keyword">new</span> SimpleQuote(0.002540));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra8Rate(<span class="keyword">new</span> SimpleQuote(0.002610));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra9Rate(<span class="keyword">new</span> SimpleQuote(0.002670));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra10Rate(<span class="keyword">new</span> SimpleQuote(0.002790));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra11Rate(<span class="keyword">new</span> SimpleQuote(0.002910));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra12Rate(<span class="keyword">new</span> SimpleQuote(0.003030));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra13Rate(<span class="keyword">new</span> SimpleQuote(0.003180));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra14Rate(<span class="keyword">new</span> SimpleQuote(0.003350));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra15Rate(<span class="keyword">new</span> SimpleQuote(0.003520));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra16Rate(<span class="keyword">new</span> SimpleQuote(0.003710));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra17Rate(<span class="keyword">new</span> SimpleQuote(0.003890));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; fra18Rate(<span class="keyword">new</span> SimpleQuote(0.004090));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">//swaps</span></div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s3yRate(<span class="keyword">new</span> SimpleQuote(0.004240));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s4yRate(<span class="keyword">new</span> SimpleQuote(0.005760));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s5yRate(<span class="keyword">new</span> SimpleQuote(0.007620));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s6yRate(<span class="keyword">new</span> SimpleQuote(0.009540));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s7yRate(<span class="keyword">new</span> SimpleQuote(0.011350));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s8yRate(<span class="keyword">new</span> SimpleQuote(0.013030));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s9yRate(<span class="keyword">new</span> SimpleQuote(0.014520));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s10yRate(<span class="keyword">new</span> SimpleQuote(0.015840));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s12yRate(<span class="keyword">new</span> SimpleQuote(0.018090));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s15yRate(<span class="keyword">new</span> SimpleQuote(0.020370));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s20yRate(<span class="keyword">new</span> SimpleQuote(0.021870));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s25yRate(<span class="keyword">new</span> SimpleQuote(0.022340));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s30yRate(<span class="keyword">new</span> SimpleQuote(0.022560));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s35yRate(<span class="keyword">new</span> SimpleQuote(0.022950));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s40yRate(<span class="keyword">new</span> SimpleQuote(0.023480));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s50yRate(<span class="keyword">new</span> SimpleQuote(0.024210));</div>
<div class="line">        ext::shared_ptr&lt;Quote&gt; s60yRate(<span class="keyword">new</span> SimpleQuote(0.024630));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; d6M(<span class="keyword">new</span> DepositRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(d6MRate),</div>
<div class="line">            6 * Months, 3,</div>
<div class="line">            calendar, <a class="code" href="group__datetime.html#ggaff46c5ae9385d20709bedade86edd368ab6a37af780aa2b97f8bbdc4d149dae18">Following</a>,</div>
<div class="line">            <span class="keyword">false</span>, depositDayCounter));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra1(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra1Rate),</div>
<div class="line">            1, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra2(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra2Rate),</div>
<div class="line">            2, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra3(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra3Rate),</div>
<div class="line">            3, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra4(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra4Rate),</div>
<div class="line">            4, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra5(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra5Rate),</div>
<div class="line">            5, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra6(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra6Rate),</div>
<div class="line">            6, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra7(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra7Rate),</div>
<div class="line">            7, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra8(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra8Rate),</div>
<div class="line">            8, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra9(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra9Rate),</div>
<div class="line">            9, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra10(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra10Rate),</div>
<div class="line">            10, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra11(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra11Rate),</div>
<div class="line">            11, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra12(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra12Rate),</div>
<div class="line">            12, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra13(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra13Rate),</div>
<div class="line">            13, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra14(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra14Rate),</div>
<div class="line">            14, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra15(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra15Rate),</div>
<div class="line">            15, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra16(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra16Rate),</div>
<div class="line">            16, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra17(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra17Rate),</div>
<div class="line">            17, euribor6M));</div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; fra18(<span class="keyword">new</span> FraRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(fra18Rate),</div>
<div class="line">            18, euribor6M));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// setup swaps</span></div>
<div class="line"> </div>
<div class="line">        <a name="a4"></a><a class="code" href="group__datetime.html#ga6d41db8ba0ea90d22df35889df452ada" title="Frequency of events.">Frequency</a> swFixedLegFrequency = <a name="a5"></a><a class="code" href="group__datetime.html#gga6d41db8ba0ea90d22df35889df452adaa508b18014c96e2d466c12b39d7f4e426" title="once a year">Annual</a>;</div>
<div class="line">        <a name="a6"></a><a class="code" href="group__datetime.html#gaff46c5ae9385d20709bedade86edd368" title="Business Day conventions.">BusinessDayConvention</a> swFixedLegConvention = <a name="a7"></a><a class="code" href="group__datetime.html#ggaff46c5ae9385d20709bedade86edd368a5fb8b90b7fdf1a3a228fbbc083e64547">Unadjusted</a>;</div>
<div class="line">        DayCounter swFixedLegDayCounter = Thirty360(Thirty360::European);</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;IborIndex&gt; swFloatingLegIndex(<span class="keyword">new</span> Euribor6M);</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s3y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s3yRate), 3 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s4y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s4yRate), 4 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s5y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s5yRate), 5 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s6y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s6yRate), 6 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s7y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s7yRate), 7 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s8y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s8yRate), 8 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s9y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s9yRate), 9 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s10y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s10yRate), 10 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s12y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s12yRate), 12 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s15y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s15yRate), 15 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s20y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s20yRate), 20 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s25y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s25yRate), 25 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s30y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s30yRate), 30 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s35y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s35yRate), 35 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s40y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s40yRate), 40 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s50y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s50yRate), 50 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;RateHelper&gt; s60y(<span class="keyword">new</span> SwapRateHelper(</div>
<div class="line">            Handle&lt;Quote&gt;(s60yRate), 60 * Years,</div>
<div class="line">            calendar, swFixedLegFrequency,</div>
<div class="line">            swFixedLegConvention, swFixedLegDayCounter,</div>
<div class="line">            swFloatingLegIndex,</div>
<div class="line">            Handle&lt;Quote&gt;(), 0 * Days, discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Euribor 6M curve</span></div>
<div class="line">        std::vector&lt;ext::shared_ptr&lt;RateHelper&gt; &gt; euribor6MInstruments;</div>
<div class="line">        euribor6MInstruments.push_back(d6M);</div>
<div class="line">        euribor6MInstruments.push_back(fra1);</div>
<div class="line">        euribor6MInstruments.push_back(fra2);</div>
<div class="line">        euribor6MInstruments.push_back(fra3);</div>
<div class="line">        euribor6MInstruments.push_back(fra4);</div>
<div class="line">        euribor6MInstruments.push_back(fra5);</div>
<div class="line">        euribor6MInstruments.push_back(fra6);</div>
<div class="line">        euribor6MInstruments.push_back(fra7);</div>
<div class="line">        euribor6MInstruments.push_back(fra8);</div>
<div class="line">        euribor6MInstruments.push_back(fra9);</div>
<div class="line">        euribor6MInstruments.push_back(fra10);</div>
<div class="line">        euribor6MInstruments.push_back(fra11);</div>
<div class="line">        euribor6MInstruments.push_back(fra12);</div>
<div class="line">        euribor6MInstruments.push_back(fra13);</div>
<div class="line">        euribor6MInstruments.push_back(fra14);</div>
<div class="line">        euribor6MInstruments.push_back(fra15);</div>
<div class="line">        euribor6MInstruments.push_back(fra16);</div>
<div class="line">        euribor6MInstruments.push_back(fra17);</div>
<div class="line">        euribor6MInstruments.push_back(fra18);</div>
<div class="line">        euribor6MInstruments.push_back(s3y);</div>
<div class="line">        euribor6MInstruments.push_back(s4y);</div>
<div class="line">        euribor6MInstruments.push_back(s5y);</div>
<div class="line">        euribor6MInstruments.push_back(s6y);</div>
<div class="line">        euribor6MInstruments.push_back(s7y);</div>
<div class="line">        euribor6MInstruments.push_back(s8y);</div>
<div class="line">        euribor6MInstruments.push_back(s9y);</div>
<div class="line">        euribor6MInstruments.push_back(s10y);</div>
<div class="line">        euribor6MInstruments.push_back(s12y);</div>
<div class="line">        euribor6MInstruments.push_back(s15y);</div>
<div class="line">        euribor6MInstruments.push_back(s20y);</div>
<div class="line">        euribor6MInstruments.push_back(s25y);</div>
<div class="line">        euribor6MInstruments.push_back(s30y);</div>
<div class="line">        euribor6MInstruments.push_back(s35y);</div>
<div class="line">        euribor6MInstruments.push_back(s40y);</div>
<div class="line">        euribor6MInstruments.push_back(s50y);</div>
<div class="line">        euribor6MInstruments.push_back(s60y);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If needed, it&#39;s possible to change the tolerance; the default is 1.0e-12.</span></div>
<div class="line">        <span class="keywordtype">double</span> tolerance = 1.0e-15;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The tolerance is passed in an explicit bootstrap object. Depending on</span></div>
<div class="line">        <span class="comment">// the bootstrap algorithm, it&#39;s possible to pass other parameters.</span></div>
<div class="line">        ext::shared_ptr&lt;YieldTermStructure&gt; euribor6MTermStructure(</div>
<div class="line">            <span class="keyword">new</span> PiecewiseYieldCurve&lt;Discount, Cubic&gt;(</div>
<div class="line">                settlementDate, euribor6MInstruments,</div>
<div class="line">                termStructureDayCounter,</div>
<div class="line">                PiecewiseYieldCurve&lt;Discount, Cubic&gt;::bootstrap_type(tolerance)));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">        /*********************</span></div>
<div class="line"><span class="comment">        * SWAPS TO BE PRICED *</span></div>
<div class="line"><span class="comment">        **********************/</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// constant nominal 1,000,000 Euro</span></div>
<div class="line">        <a name="a8"></a><a class="code" href="group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number">Real</a> nominal = 1000000.0;</div>
<div class="line">        <span class="comment">// fixed leg</span></div>
<div class="line">        <a class="code" href="group__datetime.html#ga6d41db8ba0ea90d22df35889df452ada" title="Frequency of events.">Frequency</a> fixedLegFrequency = <a class="code" href="group__datetime.html#gga6d41db8ba0ea90d22df35889df452adaa508b18014c96e2d466c12b39d7f4e426" title="once a year">Annual</a>;</div>
<div class="line">        <a class="code" href="group__datetime.html#gaff46c5ae9385d20709bedade86edd368" title="Business Day conventions.">BusinessDayConvention</a> fixedLegConvention = <a class="code" href="group__datetime.html#ggaff46c5ae9385d20709bedade86edd368a5fb8b90b7fdf1a3a228fbbc083e64547">Unadjusted</a>;</div>
<div class="line">        <a class="code" href="group__datetime.html#gaff46c5ae9385d20709bedade86edd368" title="Business Day conventions.">BusinessDayConvention</a> floatingLegConvention = <a name="a9"></a><a class="code" href="group__datetime.html#ggaff46c5ae9385d20709bedade86edd368a013e092c359f6031cc0563fd413ce707">ModifiedFollowing</a>;</div>
<div class="line">        DayCounter fixedLegDayCounter = Thirty360(Thirty360::European);</div>
<div class="line">        <a name="a10"></a><a class="code" href="group__types.html#gaede435af51236692b1107d7639581d39" title="interest rates">Rate</a> fixedRate = 0.007;</div>
<div class="line">        DayCounter floatingLegDayCounter = Actual360();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// floating leg</span></div>
<div class="line">        <a class="code" href="group__datetime.html#ga6d41db8ba0ea90d22df35889df452ada" title="Frequency of events.">Frequency</a> floatingLegFrequency = <a name="a11"></a><a class="code" href="group__datetime.html#gga6d41db8ba0ea90d22df35889df452adaad1a5868a1c314bb7f6ab68e2fa182b2d" title="twice a year">Semiannual</a>;</div>
<div class="line">        ext::shared_ptr&lt;IborIndex&gt; euriborIndex(</div>
<div class="line">                                     <span class="keyword">new</span> Euribor6M(forecastingTermStructure));</div>
<div class="line">        <a name="a12"></a><a class="code" href="group__types.html#gae7427f4743503002b0c6eeeefae91a3d" title="spreads on interest rates">Spread</a> spread = 0.0;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__types.html#gab9c87440c314438e51a899a03d2442d0" title="integer number">Integer</a> lengthInYears = 5;</div>
<div class="line">        VanillaSwap::Type swapType = VanillaSwap::Payer;</div>
<div class="line"> </div>
<div class="line">        Date maturity = settlementDate + lengthInYears*Years;</div>
<div class="line">        Schedule fixedSchedule(settlementDate, maturity,</div>
<div class="line">                               Period(fixedLegFrequency),</div>
<div class="line">                               calendar, fixedLegConvention,</div>
<div class="line">                               fixedLegConvention,</div>
<div class="line">                               <a name="a13"></a><a class="code" href="struct_quant_lib_1_1_date_generation.html#a11fcd51ef86118f65e603c1474377a78ae204c9c3e62b1e9a6b60e40cd05256c5">DateGeneration::Forward</a>, <span class="keyword">false</span>);</div>
<div class="line">        Schedule floatSchedule(settlementDate, maturity,</div>
<div class="line">                               Period(floatingLegFrequency),</div>
<div class="line">                               calendar, floatingLegConvention,</div>
<div class="line">                               floatingLegConvention,</div>
<div class="line">                               <a class="code" href="struct_quant_lib_1_1_date_generation.html#a11fcd51ef86118f65e603c1474377a78ae204c9c3e62b1e9a6b60e40cd05256c5">DateGeneration::Forward</a>, <span class="keyword">false</span>);</div>
<div class="line">        VanillaSwap spot5YearSwap(swapType, nominal,</div>
<div class="line">            fixedSchedule, fixedRate, fixedLegDayCounter,</div>
<div class="line">            floatSchedule, euriborIndex, spread,</div>
<div class="line">            floatingLegDayCounter);</div>
<div class="line"> </div>
<div class="line">        Date fwdStart = calendar.advance(settlementDate, 1, Years);</div>
<div class="line">        Date fwdMaturity = fwdStart + lengthInYears*Years;</div>
<div class="line">        Schedule fwdFixedSchedule(fwdStart, fwdMaturity,</div>
<div class="line">                                  Period(fixedLegFrequency),</div>
<div class="line">                                  calendar, fixedLegConvention,</div>
<div class="line">                                  fixedLegConvention,</div>
<div class="line">                                  <a class="code" href="struct_quant_lib_1_1_date_generation.html#a11fcd51ef86118f65e603c1474377a78ae204c9c3e62b1e9a6b60e40cd05256c5">DateGeneration::Forward</a>, <span class="keyword">false</span>);</div>
<div class="line">        Schedule fwdFloatSchedule(fwdStart, fwdMaturity,</div>
<div class="line">                                  Period(floatingLegFrequency),</div>
<div class="line">                                  calendar, floatingLegConvention,</div>
<div class="line">                                  floatingLegConvention,</div>
<div class="line">                                  <a class="code" href="struct_quant_lib_1_1_date_generation.html#a11fcd51ef86118f65e603c1474377a78ae204c9c3e62b1e9a6b60e40cd05256c5">DateGeneration::Forward</a>, <span class="keyword">false</span>);</div>
<div class="line">        VanillaSwap oneYearForward5YearSwap(swapType, nominal,</div>
<div class="line">            fwdFixedSchedule, fixedRate, fixedLegDayCounter,</div>
<div class="line">            fwdFloatSchedule, euriborIndex, spread,</div>
<div class="line">            floatingLegDayCounter);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">        /***************</span></div>
<div class="line"><span class="comment">        * SWAP PRICING *</span></div>
<div class="line"><span class="comment">        ****************/</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// utilities for reporting</span></div>
<div class="line">        std::vector&lt;std::string&gt; headers(4);</div>
<div class="line">        headers[0] = <span class="stringliteral">&quot;term structure&quot;</span>;</div>
<div class="line">        headers[1] = <span class="stringliteral">&quot;net present value&quot;</span>;</div>
<div class="line">        headers[2] = <span class="stringliteral">&quot;fair spread&quot;</span>;</div>
<div class="line">        headers[3] = <span class="stringliteral">&quot;fair fixed rate&quot;</span>;</div>
<div class="line">        std::string separator = <span class="stringliteral">&quot; | &quot;</span>;</div>
<div class="line">        <a name="a14"></a><a class="code" href="group__types.html#gaf38bdb4c54463b1f456655efa95b5c77" title="size of a container">Size</a> width = headers[0].size() + separator.size()</div>
<div class="line">                   + headers[1].size() + separator.size()</div>
<div class="line">                   + headers[2].size() + separator.size()</div>
<div class="line">                   + headers[3].size() + separator.size() - 1;</div>
<div class="line">        std::string rule(width, <span class="charliteral">&#39;-&#39;</span>), dblrule(width, <span class="charliteral">&#39;=&#39;</span>);</div>
<div class="line">        std::string tab(8, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// calculations</span></div>
<div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt;  <span class="stringliteral">&quot;5-year market swap-rate = &quot;</span></div>
<div class="line">                  &lt;&lt; std::setprecision(2) &lt;&lt; <a name="a15"></a><a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(s5yRate-&gt;value())</div>
<div class="line">                  &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; tab &lt;&lt; <span class="stringliteral">&quot;5-years swap paying &quot;</span></div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fixedRate) &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; headers[0] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[1] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[2] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[3] &lt;&lt; separator &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number">Real</a> NPV;</div>
<div class="line">        <a class="code" href="group__types.html#gaede435af51236692b1107d7639581d39" title="interest rates">Rate</a> fairRate;</div>
<div class="line">        <a class="code" href="group__types.html#gae7427f4743503002b0c6eeeefae91a3d" title="spreads on interest rates">Spread</a> fairSpread;</div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;PricingEngine&gt; swapEngine(</div>
<div class="line">                         <span class="keyword">new</span> DiscountingSwapEngine(discountingTermStructure));</div>
<div class="line"> </div>
<div class="line">        spot5YearSwap.setPricingEngine(swapEngine);</div>
<div class="line">        oneYearForward5YearSwap.setPricingEngine(swapEngine);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Of course, you&#39;re not forced to really use different curves</span></div>
<div class="line">        forecastingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line">        discountingTermStructure.linkTo(eoniaTermStructure);</div>
<div class="line"> </div>
<div class="line">        NPV = spot5YearSwap.NPV();</div>
<div class="line">        fairSpread = spot5YearSwap.fairSpread();</div>
<div class="line">        fairRate = spot5YearSwap.fairRate();</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[0].size())</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;eonia disc&quot;</span> &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[1].size())</div>
<div class="line">                  &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; NPV &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[2].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairSpread) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[3].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairRate) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// let&#39;s check that the 5 years swap has been correctly re-priced</span></div>
<div class="line">        QL_REQUIRE(std::fabs(fairRate-s5yRate-&gt;value())&lt;1e-8,</div>
<div class="line">                   <span class="stringliteral">&quot;5-years swap mispriced by &quot;</span></div>
<div class="line">                   &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(std::fabs(fairRate-s5yRate-&gt;value())));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        forecastingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line">        discountingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line"> </div>
<div class="line">        NPV = spot5YearSwap.NPV();</div>
<div class="line">        fairSpread = spot5YearSwap.fairSpread();</div>
<div class="line">        fairRate = spot5YearSwap.fairRate();</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[0].size())</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;euribor disc&quot;</span> &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[1].size())</div>
<div class="line">                  &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; NPV &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[2].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairSpread) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[3].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairRate) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        QL_REQUIRE(std::fabs(fairRate-s5yRate-&gt;value())&lt;1e-8,</div>
<div class="line">                  <span class="stringliteral">&quot;5-years swap mispriced!&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// now let&#39;s price the 1Y forward 5Y swap</span></div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; tab &lt;&lt; <span class="stringliteral">&quot;5-years, 1-year forward swap paying &quot;</span></div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fixedRate) &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; headers[0] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[1] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[2] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[3] &lt;&lt; separator &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        forecastingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line">        discountingTermStructure.linkTo(eoniaTermStructure);</div>
<div class="line"> </div>
<div class="line">        NPV = oneYearForward5YearSwap.NPV();</div>
<div class="line">        fairSpread = oneYearForward5YearSwap.fairSpread();</div>
<div class="line">        fairRate = oneYearForward5YearSwap.fairRate();</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[0].size())</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;eonia disc&quot;</span> &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[1].size())</div>
<div class="line">                  &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; NPV &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[2].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairSpread) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[3].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairRate) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        forecastingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line">        discountingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line"> </div>
<div class="line">        NPV = oneYearForward5YearSwap.NPV();</div>
<div class="line">        fairSpread = oneYearForward5YearSwap.fairSpread();</div>
<div class="line">        fairRate = oneYearForward5YearSwap.fairRate();</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[0].size())</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;euribor disc&quot;</span> &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[1].size())</div>
<div class="line">            &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; NPV &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[2].size())</div>
<div class="line">            &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairSpread) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[3].size())</div>
<div class="line">            &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairRate) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// now let&#39;s say that the 5-years swap rate goes up to 0.009%.</span></div>
<div class="line">        <span class="comment">// A smarter market element--say, connected to a data source-- would</span></div>
<div class="line">        <span class="comment">// notice the change itself. Since we&#39;re using SimpleQuotes,</span></div>
<div class="line">        <span class="comment">// we&#39;ll have to change the value manually--which forces us to</span></div>
<div class="line">        <span class="comment">// downcast the handle and use the SimpleQuote</span></div>
<div class="line">        <span class="comment">// interface. In any case, the point here is that a change in the</span></div>
<div class="line">        <span class="comment">// value contained in the Quote triggers a new bootstrapping</span></div>
<div class="line">        <span class="comment">// of the curve and a repricing of the swap.</span></div>
<div class="line"> </div>
<div class="line">        ext::shared_ptr&lt;SimpleQuote&gt; fiveYearsRate =</div>
<div class="line">            ext::dynamic_pointer_cast&lt;SimpleQuote&gt;(s5yRate);</div>
<div class="line">        fiveYearsRate-&gt;setValue(0.0090);</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt;  <span class="stringliteral">&quot;5-year market swap-rate = &quot;</span></div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(s5yRate-&gt;value()) &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; tab &lt;&lt; <span class="stringliteral">&quot;5-years swap paying &quot;</span></div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fixedRate) &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; headers[0] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[1] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[2] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[3] &lt;&lt; separator &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// now get the updated results</span></div>
<div class="line">        forecastingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line">        discountingTermStructure.linkTo(eoniaTermStructure);</div>
<div class="line"> </div>
<div class="line">        NPV = spot5YearSwap.NPV();</div>
<div class="line">        fairSpread = spot5YearSwap.fairSpread();</div>
<div class="line">        fairRate = spot5YearSwap.fairRate();</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[0].size())</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;eonia disc&quot;</span> &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[1].size())</div>
<div class="line">                  &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; NPV &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[2].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairSpread) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[3].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairRate) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        QL_REQUIRE(std::fabs(fairRate-s5yRate-&gt;value())&lt;1e-8,</div>
<div class="line">                   <span class="stringliteral">&quot;5-years swap mispriced!&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        forecastingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line">        discountingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line"> </div>
<div class="line">        NPV = spot5YearSwap.NPV();</div>
<div class="line">        fairSpread = spot5YearSwap.fairSpread();</div>
<div class="line">        fairRate = spot5YearSwap.fairRate();</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[0].size())</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;euribor disc&quot;</span> &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[1].size())</div>
<div class="line">                  &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; NPV &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[2].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairSpread) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[3].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairRate) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        QL_REQUIRE(std::fabs(fairRate-s5yRate-&gt;value())&lt;1e-8,</div>
<div class="line">                   <span class="stringliteral">&quot;5-years swap mispriced!&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// the 1Y forward 5Y swap changes as well</span></div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; tab &lt;&lt; <span class="stringliteral">&quot;5-years, 1-year forward swap paying &quot;</span></div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fixedRate) &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; headers[0] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[1] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[2] &lt;&lt; separator</div>
<div class="line">                  &lt;&lt; headers[3] &lt;&lt; separator &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        forecastingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line">        discountingTermStructure.linkTo(eoniaTermStructure);</div>
<div class="line"> </div>
<div class="line">        NPV = oneYearForward5YearSwap.NPV();</div>
<div class="line">        fairSpread = oneYearForward5YearSwap.fairSpread();</div>
<div class="line">        fairRate = oneYearForward5YearSwap.fairRate();</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[0].size())</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;eonia disc&quot;</span> &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[1].size())</div>
<div class="line">                  &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; NPV &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[2].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairSpread) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[3].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairRate) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        forecastingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line">        discountingTermStructure.linkTo(euribor6MTermStructure);</div>
<div class="line"> </div>
<div class="line">        NPV = oneYearForward5YearSwap.NPV();</div>
<div class="line">        fairSpread = oneYearForward5YearSwap.fairSpread();</div>
<div class="line">        fairRate = oneYearForward5YearSwap.fairRate();</div>
<div class="line"> </div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[0].size())</div>
<div class="line">                  &lt;&lt; <span class="stringliteral">&quot;euribor disc&quot;</span> &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[1].size())</div>
<div class="line">                  &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; NPV &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[2].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairSpread) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::setw(headers[3].size())</div>
<div class="line">                  &lt;&lt; <a class="code" href="group__manips.html#gac63ea3dad10259db3764c7d15a61cde5" title="output rates and spreads as percentages">io::rate</a>(fairRate) &lt;&lt; separator;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">catch</span> (std::exception&amp; e) {</div>
<div class="line">        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;unknown error&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.1
</small></address>
</body>
</html>
